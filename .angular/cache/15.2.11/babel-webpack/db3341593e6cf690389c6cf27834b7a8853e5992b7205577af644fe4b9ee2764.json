{"ast":null,"code":"import { combineLatest, BehaviorSubject } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/services/employee.service\";\nimport * as i2 from \"../../shared/services/auth.service\";\nimport * as i3 from \"../../shared/services/translation.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction EmployeeListComponent_ng_container_19_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r4.position.id)(\"disabled\", item_r4.count === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", item_r4.position.name, \" (\", item_r4.count, \") \");\n  }\n}\nfunction EmployeeListComponent_ng_container_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, EmployeeListComponent_ng_container_19_option_1_Template, 2, 4, \"option\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const positionsWithCount_r2 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", positionsWithCount_r2);\n  }\n}\nfunction EmployeeListComponent_ng_container_22_table_1_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const employee_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(employee_r9.employee_id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(employee_r9.last_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(employee_r9.first_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(employee_r9.position_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(employee_r9.contact_email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 6, employee_r9.salary));\n  }\n}\nfunction EmployeeListComponent_ng_container_22_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 15)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\");\n    i0.ɵɵtemplate(16, EmployeeListComponent_ng_container_22_table_1_tr_16_Template, 14, 8, \"tr\", 16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const employees_r5 = i0.ɵɵnextContext().ngIf;\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r6.translationService.translate(\"EMPLOYEE.FIELDS.EMPLOYEE_ID\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.translationService.translate(\"EMPLOYEE.FIELDS.LAST_NAME\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.translationService.translate(\"EMPLOYEE.FIELDS.FIRST_NAME\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.translationService.translate(\"EMPLOYEE.FIELDS.POSITION\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.translationService.translate(\"EMPLOYEE.FIELDS.EMAIL\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.translationService.translate(\"EMPLOYEE.FIELDS.SALARY\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", employees_r5);\n  }\n}\nfunction EmployeeListComponent_ng_container_22_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r7.translationService.translate(\"NODATA.MESSAGE\"));\n  }\n}\nfunction EmployeeListComponent_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, EmployeeListComponent_ng_container_22_table_1_Template, 17, 7, \"table\", 13);\n    i0.ɵɵtemplate(2, EmployeeListComponent_ng_container_22_div_2_Template, 3, 1, \"div\", 14);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const employees_r5 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", employees_r5.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", employees_r5.length === 0);\n  }\n}\nexport let EmployeeListComponent = /*#__PURE__*/(() => {\n  class EmployeeListComponent {\n    constructor(employeeService, authService, translationService) {\n      this.employeeService = employeeService;\n      this.authService = authService;\n      this.translationService = translationService;\n      this.sortBySubject = new BehaviorSubject('last_name');\n      this.filterPositionSubject = new BehaviorSubject('all');\n      this.translationsLoaded = false;\n      this.positions$ = this.employeeService.getPositions();\n      this.employees$ = this.employeeService.getEmployees();\n      this.isAdmin$ = this.authService.isLoggedIn();\n      this.positionsWithCount$ = combineLatest([this.positions$, this.employees$.pipe(startWith([]))]).pipe(map(([positions, employees]) => {\n        return positions.map(position => ({\n          position,\n          count: employees.filter(emp => emp.position_id === position.id).length\n        }));\n      }));\n      this.filteredEmployees$ = this.createFilteredEmployees();\n      this.translationsSubscription = this.translationService.getTranslationsLoadedObservable().subscribe(loaded => {\n        this.translationsLoaded = loaded;\n        if (loaded) {\n          console.log('Translations loaded in employee list');\n        }\n      });\n    }\n    ngOnInit() {\n      this.filterPositionSubject.next('all');\n    }\n    ngOnDestroy() {\n      if (this.translationsSubscription) {\n        this.translationsSubscription.unsubscribe();\n      }\n    }\n    createFilteredEmployees() {\n      return combineLatest([this.employees$.pipe(startWith([])), this.sortBySubject, this.filterPositionSubject]).pipe(map(([employees, sortBy, filterPosition]) => {\n        let filtered = [...employees];\n        if (filterPosition && filterPosition !== 'all') {\n          filtered = filtered.filter(emp => emp.position_id === parseInt(filterPosition));\n        }\n        filtered.sort((a, b) => {\n          switch (sortBy) {\n            case 'last_name':\n              return a.last_name.localeCompare(b.last_name);\n            case 'position':\n              return (a.position_name || '').localeCompare(b.position_name || '');\n            default:\n              return 0;\n          }\n        });\n        return filtered;\n      }));\n    }\n    onSortChange(sortBy) {\n      this.sortBySubject.next(sortBy);\n    }\n    onPositionFilterChange(positionId) {\n      this.filterPositionSubject.next(positionId);\n    }\n    resetFilters() {\n      this.filterPositionSubject.next('all');\n      this.sortBySubject.next('last_name');\n    }\n    static {\n      this.ɵfac = function EmployeeListComponent_Factory(t) {\n        return new (t || EmployeeListComponent)(i0.ɵɵdirectiveInject(i1.EmployeeService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.TranslationService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: EmployeeListComponent,\n        selectors: [[\"app-employee-list\"]],\n        decls: 24,\n        vars: 12,\n        consts: [[1, \"employee-list\"], [1, \"header-actions\"], [1, \"filters\"], [1, \"filter-group\"], [3, \"change\"], [\"value\", \"last_name\"], [\"value\", \"position\"], [1, \"position-filter\", 3, \"change\"], [\"value\", \"all\"], [4, \"ngIf\"], [1, \"table-container\"], [3, \"value\", \"disabled\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\", \"disabled\"], [\"class\", \"table\", 4, \"ngIf\"], [\"class\", \"no-data\", 4, \"ngIf\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"no-data\"]],\n        template: function EmployeeListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n            i0.ɵɵtext(3);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"label\");\n            i0.ɵɵtext(7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"select\", 4);\n            i0.ɵɵlistener(\"change\", function EmployeeListComponent_Template_select_change_8_listener($event) {\n              return ctx.onSortChange($event.target.value);\n            });\n            i0.ɵɵelementStart(9, \"option\", 5);\n            i0.ɵɵtext(10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"option\", 6);\n            i0.ɵɵtext(12);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(13, \"div\", 3)(14, \"label\");\n            i0.ɵɵtext(15);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"select\", 7);\n            i0.ɵɵlistener(\"change\", function EmployeeListComponent_Template_select_change_16_listener($event) {\n              return ctx.onPositionFilterChange($event.target.value);\n            });\n            i0.ɵɵelementStart(17, \"option\", 8);\n            i0.ɵɵtext(18);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(19, EmployeeListComponent_ng_container_19_Template, 2, 1, \"ng-container\", 9);\n            i0.ɵɵpipe(20, \"async\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(21, \"div\", 10);\n            i0.ɵɵtemplate(22, EmployeeListComponent_ng_container_22_Template, 3, 2, \"ng-container\", 9);\n            i0.ɵɵpipe(23, \"async\");\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.translationService.translate(\"EMPLOYEE.LIST\"));\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate1(\"\", ctx.translationService.translate(\"FILTERS.SORT_BY\"), \":\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.translationService.translate(\"FILTERS.LAST_NAME\"));\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.translationService.translate(\"FILTERS.POSITION\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate1(\"\", ctx.translationService.translate(\"FILTERS.FILTER_BY_POSITION\"), \":\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.translationService.translate(\"POSITION.ALL\"));\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(20, 8, ctx.positionsWithCount$));\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(23, 10, ctx.filteredEmployees$));\n          }\n        },\n        dependencies: [i4.NgForOf, i4.NgIf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i4.AsyncPipe, i4.CurrencyPipe],\n        styles: [\".employee-list[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.3rem}.employee-list[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1e3a8a;margin:0}.employee-list[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:1.3rem;margin-bottom:1.3rem;flex-wrap:wrap}.employee-list[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.employee-list[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#1e3a8a;white-space:nowrap}.employee-list[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .employee-list[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border:2px solid #8ea5e6;border-radius:8px;min-width:150px}.employee-list[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{background:#FFFFFF;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:1.3rem;margin-bottom:.9rem;overflow-x:auto}.employee-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#FFFFFF}.employee-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .employee-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.9rem;text-align:left;border-bottom:1px solid #e1e7f9}.employee-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#1E3A8A;color:#fff;font-weight:700;position:sticky;top:0}.employee-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ffecac}.employee-list[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:1.8rem;color:#3a62d4;font-style:italic}\"]\n      });\n    }\n  }\n  return EmployeeListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}